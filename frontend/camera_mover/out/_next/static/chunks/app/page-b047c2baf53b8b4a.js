(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9127:(e,t,r)=>{Promise.resolve().then(r.bind(r,5424))},5424:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(5155),o=r(2115);let n="http://52.172.219.28/back";function c(){let[e,t]=(0,o.useState)({x:0,y:0}),[r,c]=(0,o.useState)(0),[s,l]=(0,o.useState)(0),[i,d]=(0,o.useState)("white"),[h,u]=(0,o.useState)([]),[f,m]=(0,o.useState)(null),p=(0,o.useRef)(null),x=(0,o.useRef)(null),y={ArrowUp:[0,-1],ArrowDown:[0,1],ArrowRight:[1,0],ArrowLeft:[-1,0]};async function w(){try{await fetch("".concat(n,"/reset_camera/"),{method:"POST"});let e=Array.from({length:s},()=>Array(r).fill("white"));u(e)}catch(e){console.error("Error resetting camera:",e)}}async function g(){try{let e=await fetch("".concat(n,"/board_settings/")),t=await e.json(),r=t.rows,a=t.cols;c(r),l(a);let o=Array.from({length:a},()=>Array(r).fill("white"));u(o)}catch(e){console.error("Error fetching grid settings:",e)}}async function b(){try{let e=await fetch("".concat(n,"/movement/")),r=await e.json(),[a,o]=r.current_position;d(r.color),t({x:a,y:o}),u(e=>{if(!e||!e[o]||!e[o][a])return e;let t=e.map(e=>e.slice());return t[o][a]=r.color,t})}catch(e){console.error("Error fetching movement data:",e)}}async function v(){await g(),x.current=setInterval(b,1e3)}return(0,o.useEffect)(()=>(v(),p.current&&p.current.focus(),()=>{x.current&&clearInterval(x.current)}),[]),(0,a.jsxs)("div",{className:"h-screen w-screen bg-gray-200 p-4 flex flex-col items-center",ref:p,tabIndex:"0",onKeyUp:e=>{y[e.key]&&fetch("".concat(n,"/movement/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({x:y[e.key][0],y:y[e.key][1]})}).then(e=>{400===e.status?e.json().then(e=>m(e.message)):m(null)}).catch(e=>console.error("Error sending movement data:",e))},children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between w-1/2 p-2 mx-auto",children:[(0,a.jsx)("h1",{className:"text-4xl text-center text-black",children:"Camera Mover"}),(0,a.jsx)("div",{className:"w-fit border-red-500 rounded-md p-2 border-2 hover:bg-red-500 hover:text-white cursor-pointer text-red-500",onClick:w,children:"Reset"})]}),(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(s,", auto)"),gridTemplateRows:"repeat(".concat(r,", auto)"),border:"2px solid black",width:"80vh",height:"80vh"},children:h.map((e,t)=>e.map((e,r)=>(0,a.jsx)("div",{style:{backgroundColor:e,borderRight:"1px solid black",borderBottom:"1px solid black"}},"".concat(t,"-").concat(r))))}),f&&(0,a.jsx)("p",{className:"text-red-500",children:f})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(9127)),_N_E=e.O()}]);